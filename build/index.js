!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("scrivito"),require("axios"),require("dateformat")):"function"==typeof define&&define.amd?define(["react","scrivito","axios","dateformat"],t):"object"==typeof exports?exports["scrivito-eventsbrite"]=t(require("react"),require("scrivito"),require("axios"),require("dateformat")):e["scrivito-eventsbrite"]=t(e.react,e.scrivito,e.axios,e.dateformat)}(window,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(1),i=(r.provideWidgetClass("EventbriteWidget",{attributes:{eventbriteId:"string",headline:"string",description:"string",image:"reference",body:"html",location:"string",organizer:"string",street:"string",plzCity:"string",start:"date",startTime:"string",end:"date",endTime:"string"}}),n(0)),a=n(2),o=n.n(a),l=n(3),s=n.n(l);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return i.createElement("h1",{className:"h3"},e.name)}function p(e){return i.createElement("p",null,e.summary)}function v(e){return i.createElement("img",{style:{maxHeight:"430px"},src:e.logo})}function b(e){return i.createElement(r.ImageTag,{content:e.image})}function y(e){return i.createElement("p",null,i.createElement("a",{href:e.id},i.createElement("b",null,"Details zur Veranstaltung")))}function E(e){return i.createElement("p",null,i.createElement(r.LinkTag,{to:e.link},i.createElement("b",null,"ZurÃ¼ck zur Veranstaltungsliste")))}function h(e){return i.createElement("div",{className:"article",dangerouslySetInnerHTML:{__html:e.body}})}function w(e){return i.createElement("h4",null,e.location)}function _(e){return i.createElement("h5",{className:"h4"},e.organizer)}function j(e){return i.createElement("p",null,e.address1,i.createElement("br",null),e.address2)}function x(e){return i.createElement("p",null,i.createElement("b",null,"Beginn:")," ",e.start," ",i.createElement("br",null),i.createElement("b",null,"Ende:")," ",e.end)}function O(e){return i.createElement("a",{target:"_blank",className:"btn btn-primary btn-block",href:e.link},"Anmelden")}function S(e,t){return e?s()(e,t):null}var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,m(t).call(this,e))).widget=n.props.widget,n.state={event:"",name:"",url:"",start:"",end:"",venueName:"",venueAddress_1:"",venueAddress_2:"",logo:"",summary:""},n}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.widget.get("eventbriteId"),n="EDMO3BWIFXRUIQSDP7IZ",r=("Bearer ".concat(n),"https://www.eventbriteapi.com/v3/events/"+t+"/?token="+n+"&expand=venue");o.a.get(r).then(function(t){var n=t.data,r=n.description.html,i=n.name.text,a=n.url,o=n.start.local,l=n.end.local,s=n.venue.name,c=n.venue.address.localized_multi_line_address_display[0],u=n.venue.address.localized_multi_line_address_display[1],d=n.logo.original.url,m=n.summary;e.setState({event:r,name:i,url:a,start:o,end:l,venueAddress_1:c,venueAddress_2:u,venueName:s,logo:d,summary:m})})}},{key:"render",value:function(){var e=r.currentPage();if(e){var t=r.urlFor(e).includes("events");return i.createElement("div",null,this.widget.get("eventbriteId")?i.createElement("div",{className:"row"},i.createElement("div",{className:"col col-8"},i.createElement(g,{name:this.state.name}),i.createElement(p,{summary:this.state.summary}),t?i.createElement(y,{id:"/".concat(this.widget.obj().id())}):i.createElement(E,{link:"/events/aktuelle-veranstaltungen.html"}),i.createElement(v,{logo:this.state.logo}),!t&&i.createElement(h,{body:this.state.event})),i.createElement("div",{className:"col col-4"},i.createElement(w,{location:this.state.venueName}),i.createElement(j,{address1:this.state.venueAddress_1,address2:this.state.venueAddress_2}),i.createElement(x,{start:S(this.state.start,"dd.mm.yy HH:MM"),end:S(this.state.end,"dd.mm.yy HH:MM")}),i.createElement(O,{link:this.state.url}))):i.createElement("div",{className:"row"},i.createElement("div",{className:"col col-8"},i.createElement(g,{name:this.widget.get("headline")}),i.createElement(p,{summary:this.widget.get("description")}),t?i.createElement(y,{id:"/".concat(this.widget.obj().id())}):i.createElement(E,{link:"/events/aktuelle-veranstaltungen.html"}),i.createElement(b,{image:this.widget.get("image")}),!t&&i.createElement(h,{body:this.widget.get("body")})),i.createElement("div",{className:"col col-4"},i.createElement(w,{location:this.widget.get("location")}),i.createElement(_,{organizer:this.widget.get("organizer")}),i.createElement(j,{address1:this.widget.get("street"),address2:this.widget.get("plzCity")}),i.createElement(x,{start:S(this.widget.get("start"),"dd.mm.yy ")+this.widget.get("startTime"),end:S(this.widget.get("end"),"dd.mm.yy ")+this.widget.get("endTime")}))))}}}])&&u(n.prototype,a),l&&u(n,l),t}();r.provideComponent("EventbriteWidget",T),r.provideEditingConfig("EventbriteWidget",{title:"Eventbrite",attributes:{eventbriteId:{title:"ID",description:"ID of the event"},headline:{title:"Headline"},description:{title:"Description"},image:{title:"Image"},body:{title:"Body"},location:{title:"Location"},organizer:{title:"Organizer"},street:{title:"Street/Nr."},plzCity:{title:"PLZ/City"},start:{title:"Start Date"},startTime:{title:"Start Time",description:"Format: HH:MM 18:00"},end:{title:"End Date"},endTime:{title:"End Time",description:"Format: HH:MM 20:30"}},properties:["eventbriteId","headline","description","image","body","location","organizer","street","plzCity","start","startTime","end","endTime"]});r.provideWidgetClass("EventbriteListWidget",{attributes:{count:"integer"}});function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.provideComponent("EventbriteListWidget",function(e){e.widget;var t=C(r.Obj.where("_objClass","equals","EventbriteWidget").order("_lastChanged","desc"));return!t.length&&r.isInPlaceEditingActive()?i.createElement("h4",{className:"text-center"},"Provide a reference to another page in the widget properties."):i.createElement("div",null,C(t).map(function(e,t){return i.createElement("div",{key:t},i.createElement(r.ContentTag,{tag:"div",content:e,attribute:"body"}))}))}),r.provideEditingConfig("EventbriteListWidget",{title:"Eventbrite list",attributes:{count:{title:"Number of records",description:"Default: 6"}},properties:["count"],initialContent:{count:6}})}])});