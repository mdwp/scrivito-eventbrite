!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("scrivito"),require("axios"),require("dateformat"),require("react-slick")):"function"==typeof define&&define.amd?define(["react","scrivito","axios","dateformat","react-slick"],t):"object"==typeof exports?exports["scrivito-eventsbrite"]=t(require("react"),require("scrivito"),require("axios"),require("dateformat"),require("react-slick")):e["scrivito-eventsbrite"]=t(e.react,e.scrivito,e.axios,e.dateformat,e["react-slick"])}(window,function(e,t,n,r,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t,n){"use strict";n.r(t);var r=n(1),i=(r.provideWidgetClass("EventbriteWidget",{attributes:{eventbriteId:"string",headline:"string",description:"string",image:"reference",body:"html",location:"string",organizer:"string",street:"string",plzCity:"string",start:"date",startTime:"string",end:"date",endTime:"string"}}),n(0)),o=n(2),a=n.n(o),l=n(3),c=n.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return i.createElement("h1",{className:"h3"},e.name)}function b(e){return i.createElement("p",null,e.summary)}function g(e){return i.createElement("img",{style:{maxHeight:"430px"},src:e.logo})}function y(e){return i.createElement(r.ImageTag,{content:e.image})}function v(e){return i.createElement("p",null,i.createElement("a",{href:e.id},i.createElement("b",null,"Details zur Veranstaltung")))}function h(e){return i.createElement("p",null,i.createElement(r.LinkTag,{to:e.link},i.createElement("b",null,"ZurÃ¼ck zur Veranstaltungsliste")))}function E(e){return i.createElement("div",{className:"article",dangerouslySetInnerHTML:{__html:e.body}})}function w(e){return i.createElement("h4",null,e.location)}function _(e){return i.createElement("h5",{className:"h4"},e.organizer)}function j(e){return i.createElement("p",null,e.address1,i.createElement("br",null),e.address2)}function O(e){return i.createElement("p",null,i.createElement("b",null,"Beginn:")," ",e.start," ",i.createElement("br",null),i.createElement("b",null,"Ende:")," ",e.end)}function S(e){return i.createElement("a",{target:"_blank",className:"btn btn-primary btn-block",href:e.link},"Anmelden")}function k(e,t){return e?c()(e,t):null}var x=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,f(t).call(this,e))).widget=n.props.widget,n.state={event:"",name:"",url:"",start:"",end:"",venueName:"",venueAddress_1:"",venueAddress_2:"",logo:"",summary:""},n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=this.widget.get("eventbriteId"),n="EDMO3BWIFXRUIQSDP7IZ",r=("Bearer ".concat(n),"https://www.eventbriteapi.com/v3/events/"+t+"/?token="+n+"&expand=venue");a.a.get(r).then(function(t){var n=t.data,r=n.description.html,i=n.name.text,o=n.url,a=n.start.local,l=n.end.local,c=n.venue.name,s=n.venue.address.localized_multi_line_address_display[0],u=n.venue.address.localized_multi_line_address_display[1],d=n.logo.original.url,f=n.summary;e.setState({event:r,name:i,url:o,start:a,end:l,venueAddress_1:s,venueAddress_2:u,venueName:c,logo:d,summary:f})})}},{key:"render",value:function(){var e=r.currentPage();if(e){var t=r.urlFor(e).includes("events")||r.Obj.root().path();return i.createElement("div",null,this.widget.get("eventbriteId")?i.createElement("div",{className:"row"},i.createElement("div",{className:"col col-8"},i.createElement(p,{name:this.state.name}),i.createElement(b,{summary:this.state.summary}),t?i.createElement(v,{id:"/".concat(this.widget.obj().id())}):i.createElement(h,{link:"/events/aktuelle-veranstaltungen.html"}),i.createElement(g,{logo:this.state.logo}),!t&&i.createElement(E,{body:this.state.event})),i.createElement("div",{className:"col col-4"},i.createElement(w,{location:this.state.venueName}),i.createElement(j,{address1:this.state.venueAddress_1,address2:this.state.venueAddress_2}),i.createElement(O,{start:k(this.state.start,"dd.mm.yy HH:MM"),end:k(this.state.end,"dd.mm.yy HH:MM")}),i.createElement(S,{link:this.state.url}))):i.createElement("div",{className:"row"},i.createElement("div",{className:"col col-8"},i.createElement(p,{name:this.widget.get("headline")}),i.createElement(b,{summary:this.widget.get("description")}),t?i.createElement(v,{id:"/".concat(this.widget.obj().id())}):i.createElement(h,{link:"/events/aktuelle-veranstaltungen.html"}),i.createElement(y,{image:this.widget.get("image")}),!t&&i.createElement(E,{body:this.widget.get("body")})),i.createElement("div",{className:"col col-4"},i.createElement(w,{location:this.widget.get("location")}),i.createElement(_,{organizer:this.widget.get("organizer")}),i.createElement(j,{address1:this.widget.get("street"),address2:this.widget.get("plzCity")}),i.createElement(O,{start:k(this.widget.get("start"),"dd.mm.yy ")+this.widget.get("startTime"),end:k(this.widget.get("end"),"dd.mm.yy ")+this.widget.get("endTime")}))))}}}])&&u(n.prototype,o),l&&u(n,l),t}();r.provideComponent("EventbriteWidget",x),r.provideEditingConfig("EventbriteWidget",{title:"Eventbrite",attributes:{eventbriteId:{title:"ID",description:"ID of the event"},headline:{title:"Headline"},description:{title:"Description"},image:{title:"Image"},body:{title:"Body"},location:{title:"Location"},organizer:{title:"Organizer"},street:{title:"Street/Nr."},plzCity:{title:"PLZ/City"},start:{title:"Start Date"},startTime:{title:"Start Time",description:"Format: HH:MM 18:00"},end:{title:"End Date"},endTime:{title:"End Time",description:"Format: HH:MM 20:30"}},properties:["eventbriteId","ikt","headline","description","image","body","location","organizer","street","plzCity","start","startTime","end","endTime"],initialContent:{ikt:"false"}});r.provideWidgetClass("EventbriteListWidget",{attributes:{count:"integer"}});function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A(this,M(t).call(this,e))).state={references:[]},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,i["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;r.load(function(){return T(r.Obj.where("_objClass","equals","EventbriteWidget").order("_createdAt","desc"))}).then(function(t){e.setState({references:t})})}},{key:"render",value:function(){return i.createElement("div",null,this.state.references.map(function(e,t){return i.createElement("div",{key:t},i.createElement(r.ContentTag,{tag:"div",content:e,attribute:"body"}))}))}}])&&P(n.prototype,o),a&&P(n,a),t}();r.provideComponent("EventbriteListWidget",z),r.provideEditingConfig("EventbriteListWidget",{title:"Eventbrite list",attributes:{count:{title:"Number of records",description:"Default: 6"}},properties:["count"],initialContent:{count:6}});r.provideWidgetClass("EventbriteSliderWidget",{attributes:{count:"integer"}});var I=n(4),W=n.n(I);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.provideComponent("EventbriteSliderWidget",function(e){var t=e.widget.get("count"),n=r.Obj.where("_objClass","equals","EventbriteWidget").order("_lastChanged","desc").take(t),o={arrows:!0,autoplay:!1,autoplaySpeed:5e3,centerMode:!0,centerPadding:"0px",cssEase:"linear",dots:!0,fade:!1,infinite:!0,lazyLoad:!0,slide:"div",slidesToShow:1,speed:1e3,variableWidth:!1,responsive:[{breakpoint:800,settings:{centerMode:!1}}]};return!n.length&&r.isInPlaceEditingActive()?i.createElement("h4",{className:"text-center"},"Provide a reference to an eventbrite event in the widget properties."):i.createElement("div",null,i.createElement(W.a,q({},o,{className:"slickslide"}),D(n).map(function(e,t){return i.createElement("div",{key:t},i.createElement(r.ContentTag,{tag:"div",content:e,attribute:"body"}))})))}),r.provideEditingConfig("EventbriteSliderWidget",{title:"Eventbrite slider list",attributes:{count:{title:"Number of slides",description:"Default: 6"}},properties:["count"],initialContent:{count:6}})}])});