!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("scrivito"),require("axios"),require("dateformat")):"function"==typeof define&&define.amd?define(["react","scrivito","axios","dateformat"],t):"object"==typeof exports?exports["scrivito-eventsbrite"]=t(require("react"),require("scrivito"),require("axios"),require("dateformat")):e["scrivito-eventsbrite"]=t(e.react,e.scrivito,e.axios,e.dateformat)}(window,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(1),o=(r.provideWidgetClass("EventbriteWidget",{attributes:{eventbriteId:"string"}}),n(0)),i=n(2),a=n.n(i),u=n(3),l=n.n(u);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return o.createElement("h1",{className:"h3"},e.name)}function v(e){return o.createElement("p",null,e.summary)}function b(e){return o.createElement("img",{style:{maxHeight:"430px"},src:e.logo})}function y(e,t){return e?l()(e,t):null}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,f(t).call(this,e))).widget=n.props.widget,n.state={event:"",name:"",url:"",start:"",end:"",venueName:"",venueAddress_1:"",venueAddress_2:"",logo:"",summary:""},n}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this,t=this.widget.get("eventbriteId"),n="EDMO3BWIFXRUIQSDP7IZ",r=("Bearer ".concat(n),"https://www.eventbriteapi.com/v3/events/"+t+"/?token="+n+"&expand=venue");a.a.get(r).then(function(t){var n=t.data,r=n.description.html,o=n.name.text,i=n.url,a=n.start.local,u=n.end.local,l=n.venue.name,c=n.venue.address.localized_multi_line_address_display[0],s=n.venue.address.localized_multi_line_address_display[1],d=n.logo.original.url,f=n.summary;e.setState({event:r,name:o,url:i,start:a,end:u,venueAddress_1:c,venueAddress_2:s,venueName:l,logo:d,summary:f})})}},{key:"render",value:function(){var e=r.currentPage();if(e){var t=r.urlFor(e).includes("events");return o.createElement("div",{className:"row"},o.createElement("div",{className:"col col-8"},o.createElement(p,{name:this.state.name}),o.createElement(v,{summary:this.state.summary}),t?o.createElement("p",null,o.createElement("a",{href:"/".concat(this.widget.obj().id())},o.createElement("b",null,"Details zur Veranstaltung"))):o.createElement("p",null,o.createElement(r.LinkTag,{to:"/events/aktuelle-veranstaltungen.html"},o.createElement("b",null,"ZurÃ¼ck zur Veranstaltungsliste"))),o.createElement(b,{logo:this.state.logo}),!t&&o.createElement("div",{className:"article",dangerouslySetInnerHTML:{__html:this.state.event}})),o.createElement("div",{className:"col col-4"},o.createElement("h4",null,this.state.venueName),o.createElement("p",null,this.state.venueAddress_1,o.createElement("br",null),this.state.venueAddress_2),o.createElement("p",null,o.createElement("b",null,"Beginn:")," ",y(this.state.start,"dd.mm.yy HH:MM")," ",o.createElement("br",null),o.createElement("b",null,"Ende:")," ",y(this.state.end,"dd.mm.yy HH:MM")),o.createElement("a",{target:"_blank",className:"btn btn-primary btn-block",href:this.state.url},"Anmelden")))}}}])&&s(n.prototype,i),u&&s(n,u),t}();r.provideComponent("EventbriteWidget",g),r.provideEditingConfig("EventbriteWidget",{title:"Eventbrite",attributes:{eventbriteId:{title:"ID",description:"ID of the event"}},properties:["eventbriteId"]});r.provideWidgetClass("EventbriteListWidget",{attributes:{count:"integer"}});function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.provideComponent("EventbriteListWidget",function(e){e.widget;var t=h(r.Obj.where("_objClass","equals","EventbriteWidget").order("_lastChanged","desc"));return!t.length&&r.isInPlaceEditingActive()?o.createElement("h4",{className:"text-center"},"Provide a reference to another page in the widget properties."):o.createElement("div",null,h(t).map(function(e,t){return o.createElement("div",{key:t},o.createElement(r.ContentTag,{tag:"div",content:e,attribute:"body"}))}))}),r.provideEditingConfig("EventbriteListWidget",{title:"Eventbrite list",attributes:{count:{title:"Number of records",description:"Default: 6"}},properties:["count"],initialContent:{count:6}})}])});